# WarsawPublicTransport

This project aims to gather precise arrival timings for both buses and trams at every stop located in Warsaw and compute the delays for buses. The project is divided into two scripts:

# 1. Timetable script.ipynb
The primary objective of this script is to gather accurate arrival time data. It collects information about all the stops in Warsaw through the API access point (https://api.um.warszawa.pl/).\
In the first stage, the script collects data of all stops in Warsaw. This data includes stop number (zespol), stop label (slupek), longitude (dlug_geo), and latitude (szer_geo).\
At the second stage, the script sends a request to the API for each stop number, stop label, and line number to collect accurate arrival time data. Using this information, it generates a timetable DataFrame, which includes:
- fleet number (brygada)
- time (czas)
- stop name (stop_name)
- stop number (stop_id)
- stop label (bus_stop_nr)
- line number (line)
- longitude (Lon)
- latitude (Lat).

Finally, it saves this DataFrame as a timetable.csv file, which is available in the repository.

![timetable](https://user-images.githubusercontent.com/55345644/224541244-861f4fa1-ce09-4c60-bdbe-b91c7558c090.png)


# 2. Delays script.ipynb
The objective of this script is to compute bus delays in Warsaw. The delays are determined by analyzing data from two sources:\
- timetable.csv file, which was generated by the previous script and provides information about where a particular bus should be at a specific time
- API requests that provide real-time information about the current location of the buses.\

Using timetable.csv file and real-time data on the current location of buses, the script calculates the delay in minutes for each bus. The delay is determined by comparing the expected arrival time of a bus at a particular stop, as provided by the timetable.csv file, with the actual arrival time of the bus at that stop, as obtained from the real-time data.\
Finally, the script generates a DataFrame that includes:
- line number ('Lines')
- vehicle number ('VehicleNumber')
- fleet number ('Brigade')
- actual time ('Time')
- actual longitude ('Lon')
- actual latitude ('Lat')
- arrival time at the next bus stop ('Time_stop')
- longitude of the next bus stop ('Lon')
- latitude of the next bus stop ('Lat')
- the time in minutes required to travel from the current location to the location of the next bus stop ('duration')
- the difference in minutes between the planned arrival time and the actual arrival time ('diff')
- the delay in minutes, which is the difference between duration variable and diff variable ('delay').

![delays table](https://user-images.githubusercontent.com/55345644/224541258-6db83e9f-91b4-4266-9bbd-7003d050e324.png)

Final information displayed on the chart.

![delays](https://user-images.githubusercontent.com/55345644/224541271-8cf7acd9-2d47-484c-aaa8-64ae734c10bc.png)
